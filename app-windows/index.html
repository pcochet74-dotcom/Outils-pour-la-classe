<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Détecteur de bruit</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }

        /* Pour centrer le widget comme dans l’ENT */
        #noise-widget {
            max-width: 420px;
            margin: auto;
            list-style: none;
        }
    </style>
</head>

<body>

<li id="noise-widget" class="widget widget-locked ng-scope ng-isolate-scope">

    <div class="widget-applications">

        <!-- HEADER ENT -->
        <div class="widget-header" style="display:flex; justify-content:space-between; align-items:center;">
            
            <div class="subtitle" style="display:flex; align-items:center;">
                <a href="https://pcochet74-dotcom.github.io/Ent-classe-bruit/Accueil.html" target="_blank" style="display:flex; align-items:center;">
                    <img src="https://raw.githubusercontent.com/pcochet74-dotcom/Ent-classe-bruit/5d5a542152ef8ed5cc98a24d7279ce034899a0bc/Logo%20redirection%20page%20Accueil.jpg"
                         width="18" height="18" style="margin-right:6px; border-radius:3px;">
                </a>
                Détecteur de bruit
            </div>

            <div style="display:flex; align-items:center; gap:10px;">
                    <a id="noise-settings" href="https://pcochet74-dotcom.github.io/Ent-classe-bruit/Param%C3%A8tres.html" target="_blank" style="font-size:20px; text-decoration:none; cursor:pointer;">⚙️</a>
                <div class="widget-options">
                    <div class="widget-handle"><i class="fas fa-grip-vertical"></i></div>
                </div>
            </div>
        </div>

        <!-- BODY ENT -->
        <div class="widget-body" style="padding: 15px;">

            <!-- SELECTEURS FIRESTORE -->
            <div id="firestore-selectors" style="
                background:#f3f3f3;
                padding:10px;
                border-radius:6px;
                margin-bottom:12px;
                display:flex;
                flex-direction:column;
                gap:6px;
            ">
                <div style="display:flex; justify-content:space-between; gap:10px;">
                    <label style="flex:1;">Prof :</label>
                    <select id="prof-select" style="flex:2; padding:4px; border-radius:4px;"></select>
                </div>

                <div style="display:flex; justify-content:space-between; gap:10px;">
                    <label style="flex:1;">Salle :</label>
                    <select id="salle-select" style="flex:2; padding:4px; border-radius:4px;"></select>
                </div>

                <div style="display:flex; justify-content:space-between; gap:10px;">
                    <label style="flex:1;">Classe :</label>
                    <select id="classe-select" style="flex:2; padding:4px; border-radius:4px;"></select>
                </div>
            </div>

            <!-- SLIDER -->
            <div style="margin-bottom:12px;">
                <label for="noise-threshold" style="font-weight:bold;">Seuil :</label>
                <input id="noise-threshold" type="range" min="0" max="120" value="80" style="width:100%; cursor:pointer;">
                <div style="text-align:right; font-size:14px;">
                    <span id="threshold-value">80</span> dB
                </div>
            </div>

            <!-- BOUTONS -->
            <div style="display:flex; gap:10px; margin-bottom:10px;">
                <button id="noise-toggle" style="
                    padding:5px 10px;
                    border-radius:4px;
                    border:none;
                    background:#0078d4;
                    color:white;
                    cursor:pointer;
                ">Activer</button>

                <button id="historique-toggle" style="
                    padding:5px 10px;
                    border-radius:4px;
                    border:none;
                    background:#0078d4;
                    color:white;
                    cursor:pointer;
                ">Historique OFF</button>
            </div>

            <!-- BOX BRUIT -->
            <div id="noise-box" style="
                width: 100%;
                height: 80px;
                background: green;
                border-radius: 8px;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-size: 20px;
                font-weight: bold;
                margin-bottom: 10px;
            ">Calme</div>

            <!-- HISTORIQUE -->
            <canvas id="noise-history" width="300" height="80" style="width:100%;"></canvas>

            <!-- BARRE DE NIVEAU -->
            <div style="width:100%; height:10px; background:#ddd; border-radius:5px; overflow:hidden;">
                <div id="noise-level" style="height:100%; width:0%; background:#0078d4;"></div>
            </div>

        </div>
    </div>

</li>

<script src="script.js"></script>

</body>
</html>
